# Amazon Web Services CloudFormation Stack SBT Plugin

[![Travis](https://img.shields.io/travis/Dwolla/sbt-cloudformation-stack.svg?style=flat-square)](https://travis-ci.org/Dwolla/sbt-cloudformation-stack)
[![Bintray](https://img.shields.io/bintray/v/dwolla/sbt-plugins/sbt-cloudformation-stack.svg?style=flat-square)](https://bintray.com/dwolla/sbt-plugins/sbt-cloudformation-stack/view)
[![license](https://img.shields.io/github/license/Dwolla/sbt-cloudformation-stack.svg?style=flat-square)]()

An sbt plugin to deploy a CloudFormation stack generated by the project. Create a main class in the project that accepts a file path as its first argument, and write the stack's CloudFormation template to the given file.

## Installation and Enabling

Add the following to `project/plugins.sbt`

    addSbtPlugin("com.dwolla.sbt" % "sbt-cloudformation-stack" % "{version-number}")

Then, enable the plugin by adding something like the following to `build.sbt`:

    val app = (project in file(".")).enablePlugins(CloudFormationStack)

## Settings

### `templateJsonFilename`

Filename of the generated JSON CloudFormation template.

### `stackName`

Name of the stack. Defaults the normalized name of the project.

### `stackParameters`

List of key-value pairs that will be provided to the stack as parameters. These can accept task or setting values; e.g., S3 bucket and keys from the [S3 Publisher](https://github.com/Dwolla/sbt-s3-publisher) plugin.

## Tasks

### `generate`

Runs the main class of the project, passing `templateJson` as the first argument. 

### `deploy`

Creates or updates a CloudFormation stack using the generated JSON template.
